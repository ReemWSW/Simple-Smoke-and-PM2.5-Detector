# เครื่องตรวจจับควัน + ฝุ่น PM2.5
Simple Smoke + PM2.5 Detector

โปรเจกต์นี้เป็นเครื่องตรวจจับควันและฝุ่น PM2.5 โดยใช้ ESP32 พร้อมเซ็นเซอร์ MQ-2 และ PMS5003

## อุปกรณ์ที่ต้องใช้

### ฮาร์ดแวร์
- ESP32 Development Board
- เซ็นเซอร์ควัน MQ-2
- เซ็นเซอร์ฝุ่น PMS5003
- LED (สำหรับแจ้งเตือน)
- สายไฟและบอร์ดทดลอง

### การเชื่อมต่อ
```
MQ-2 → ESP32
- VCC → 3.3V
- GND → GND
- AO → GPIO34

PMS5003 → ESP32
- VCC → 5V
- GND → GND
- TX → GPIO16 (RX)
- RX → GPIO17 (TX)

LED → ESP32
- Anode → GPIO2
- Cathode → GND (ผ่านตัวต้านทาน 220Ω)
```

## ไลบรารี่ที่ต้องติดตั้ง

### Arduino IDE
1. เปิด Arduino IDE
2. ไปที่ **Tools → Manage Libraries**
3. ค้นหาและติดตั้งไลบรารี่ต่อไปนี้:

#### PMS Library
```
ชื่อ: PMS Library
ผู้พัฒนา: Mariusz Kacki
เวอร์ชัน: ล่าสุด
```

หรือติดตั้งผ่าน Library Manager โดยค้นหา "PMS"


## การติดตั้งและใช้งาน

### ขั้นตอนการติดตั้ง
1. ดาวน์โหลดหรือ clone โปรเจกต์นี้
2. เปิดไฟล์ `QM_PM.ino` ใน Arduino IDE
3. ติดตั้งไลบรารี่ PMS Library ตามที่ระบุข้างต้น
4. เลือกบอร์ด ESP32 Dev Module
5. เชื่อมต่ออุปกรณ์ตามแผนภาพการเชื่อมต่อ
6. อัพโหลดโค้ดไปยัง ESP32

### การใช้งาน
1. เมื่อเปิดเครื่องจะมีการอุ่นเซ็นเซอร์ควัน 20 วินาที
2. ระบบจะแสดงค่าการอ่านผ่าน Serial Monitor ที่ baud rate 115200
3. เมื่อตรวจพบควันหรือฝุ่นเกินกำหนด LED จะกระพริบเตือน

### ค่าเตือนปริยาย
- **ควัน**: 2000 (จาก 4095)
- **PM2.5**: 75 μg/m³

### การปรับแต่งค่าเตือน
แก้ไขค่าตัวแปรในโค้ด:
```cpp
int smokeAlert = 2000;  // ค่าเตือนควัน
int pm25Alert = 75;     // ค่าเตือน PM2.5
```

## ผลลัพธ์ที่ได้รับ
- การแสดงค่าแบบเรียลไทม์ผ่าน Serial Monitor
- การแจ้งเตือนด้วย LED เมื่อตรวจพบควันหรือฝุ่นสูง
- ข้อความแจ้งเตือนผ่าน Serial Monitor

## การแก้ไขปัญหา
- ตรวจสอบการเชื่อมต่อสายไฟ
- ตรวจสอบว่าได้ติดตั้งไลบรารี่ PMS Library แล้ว
- ตรวจสอบ baud rate ของ Serial Monitor (115200)
- รอให้เซ็นเซอร์ควันอุ่นตัวเสร็จก่อนใช้งาน